var Rt=Object.defineProperty;var zt=(t,e,n)=>e in t?Rt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ne=(t,e,n)=>(zt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function E(){}const Mt=t=>t;function Fe(t,e){for(const n in e)t[n]=e[n];return t}function Yt(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Ct(t){return t()}function Ge(){return Object.create(null)}function X(t){t.forEach(Ct)}function je(t){return typeof t=="function"}function ne(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let qe;function $e(t,e){return t===e?!0:(qe||(qe=document.createElement("a")),qe.href=e,t===qe.href)}function Gt(t){return Object.keys(t).length===0}function We(t,...e){if(t==null){for(const l of e)l(void 0);return E}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Z(t){let e;return We(t,n=>e=n)(),e}function G(t,e,n){t.$$.on_destroy.push(We(e,n))}function qt(t,e,n,l){if(t){const r=At(t,e,n,l);return t[0](r)}}function At(t,e,n,l){return t[1]&&l?Fe(n.ctx.slice(),t[1](l(e))):n.ctx}function Tt(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],i=Math.max(e.dirty.length,r.length);for(let a=0;a<i;a+=1)s[a]=e.dirty[a]|r[a];return s}return e.dirty|r}return e.dirty}function Dt(t,e,n,l,r,s){if(r){const i=At(e,n,l,s);t.p(i,r)}}function Ot(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function j(t,e,n){return t.set(n),e}function Xt(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Pt=typeof window<"u";let Et=Pt?()=>window.performance.now():()=>Date.now(),Ve=Pt?t=>requestAnimationFrame(t):E;const ye=new Set;function jt(t){ye.forEach(e=>{e.c(t)||(ye.delete(e),e.f())}),ye.size!==0&&Ve(jt)}function Nt(t){let e;return ye.size===0&&Ve(jt),{promise:new Promise(n=>{ye.add(e={c:t,f:n})}),abort(){ye.delete(e)}}}function p(t,e){t.appendChild(e)}function Ht(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Jt(t){const e=w("style");return e.textContent="/* empty */",Qt(Ht(t),e),e.sheet}function Qt(t,e){return p(t.head||t,e),e.sheet}function A(t,e,n){t.insertBefore(e,n||null)}function q(t){t.parentNode&&t.parentNode.removeChild(t)}function Se(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function Y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function F(t){return document.createTextNode(t)}function T(){return F(" ")}function we(){return F("")}function H(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Kt(t){return Array.from(t.childNodes)}function Q(t,e){e=""+e,t.data!==e&&(t.data=e)}function Oe(t,e){t.value=e??""}function pe(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function Xe(t,e,n){t.classList.toggle(e,!!n)}function el(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}const Pe=new Map;let Ee=0;function tl(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function ll(t,e){const n={stylesheet:Jt(e),rules:{}};return Pe.set(t,n),n}function Je(t,e,n,l,r,s,i,a=0){const o=16.666/l;let c=`{
`;for(let S=0;S<=1;S+=o){const v=e+(n-e)*s(S);c+=S*100+`%{${i(v,1-v)}}
`}const d=c+`100% {${i(n,1-n)}}
}`,f=`__svelte_${tl(d)}_${a}`,g=Ht(t),{stylesheet:h,rules:m}=Pe.get(g)||ll(g,t);m[f]||(m[f]=!0,h.insertRule(`@keyframes ${f} ${d}`,h.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${f} ${l}ms linear ${r}ms 1 both`,Ee+=1,f}function nl(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),r=n.length-l.length;r&&(t.style.animation=l.join(", "),Ee-=r,Ee||rl())}function rl(){Ve(()=>{Ee||(Pe.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&q(e)}),Pe.clear())})}let Ce;function ue(t){Ce=t}function It(){if(!Ce)throw new Error("Function called outside component initialization");return Ce}function Re(t){It().$$.on_mount.push(t)}const _e=[],me=[];let ke=[];const Qe=[],sl=Promise.resolve();let Ze=!1;function il(){Ze||(Ze=!0,sl.then(ze))}function he(t){ke.push(t)}const He=new Set;let be=0;function ze(){if(be!==0)return;const t=Ce;do{try{for(;be<_e.length;){const e=_e[be];be++,ue(e),al(e.$$)}}catch(e){throw _e.length=0,be=0,e}for(ue(null),_e.length=0,be=0;me.length;)me.pop()();for(let e=0;e<ke.length;e+=1){const n=ke[e];He.has(n)||(He.add(n),n())}ke.length=0}while(_e.length);for(;Qe.length;)Qe.pop()();Ze=!1,He.clear(),ue(t)}function al(t){if(t.fragment!==null){t.update(),X(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(he)}}function ol(t){const e=[],n=[];ke.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ke=e}let Le;function cl(){return Le||(Le=Promise.resolve(),Le.then(()=>{Le=null})),Le}function Ie(t,e,n){t.dispatchEvent(el(`${e?"intro":"outro"}${n}`))}const Ae=new Set;let de;function oe(){de={r:0,c:[],p:de}}function ce(){de.r||X(de.c),de=de.p}function P(t,e){t&&t.i&&(Ae.delete(t),t.i(e))}function I(t,e,n,l){if(t&&t.o){if(Ae.has(t))return;Ae.add(t),de.c.push(()=>{Ae.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const ul={duration:0};function xe(t,e,n,l){let s=e(t,n,{direction:"both"}),i=l?0:1,a=null,o=null,c=null,d;function f(){c&&nl(t,c)}function g(m,y){const S=m.b-i;return y*=Math.abs(S),{a:i,b:m.b,d:S,duration:y,start:m.start,end:m.start+y,group:m.group}}function h(m){const{delay:y=0,duration:S=300,easing:v=Mt,tick:D=E,css:C}=s||ul,x={start:Et()+y,b:m};m||(x.group=de,de.r+=1),"inert"in t&&(m?d!==void 0&&(t.inert=d):(d=t.inert,t.inert=!0)),a||o?o=x:(C&&(f(),c=Je(t,i,m,S,y,v,C)),m&&D(0,1),a=g(x,S),he(()=>Ie(t,m,"start")),Nt(k=>{if(o&&k>o.start&&(a=g(o,S),o=null,Ie(t,a.b,"start"),C&&(f(),c=Je(t,i,a.b,a.duration,0,v,s.css))),a){if(k>=a.end)D(i=a.b,1-i),Ie(t,a.b,"end"),o||(a.b?f():--a.group.r||X(a.group.c)),a=null;else if(k>=a.start){const $=k-a.start;i=a.a+a.d*v($/a.duration),D(i,1-i)}}return!!(a||o)}))}return{run(m){je(s)?cl().then(()=>{s=s({direction:m?"in":"out"}),h(m)}):h(m)},end(){f(),a=o=null}}}function Ke(t,e){const n=e.token={};function l(r,s,i,a){if(e.token!==n)return;e.resolved=a;let o=e.ctx;i!==void 0&&(o=o.slice(),o[i]=a);const c=r&&(e.current=r)(o);let d=!1;e.block&&(e.blocks?e.blocks.forEach((f,g)=>{g!==s&&f&&(oe(),I(f,1,1,()=>{e.blocks[g]===f&&(e.blocks[g]=null)}),ce())}):e.block.d(1),c.c(),P(c,1),c.m(e.mount(),e.anchor),d=!0),e.block=c,e.blocks&&(e.blocks[s]=c),d&&ze()}if(Yt(t)){const r=It();if(t.then(s=>{ue(r),l(e.then,1,e.value,s),ue(null)},s=>{if(ue(r),l(e.catch,2,e.error,s),ue(null),!e.hasCatch)throw s}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function dl(t,e,n){const l=e.slice(),{resolved:r}=t;t.current===t.then&&(l[t.value]=r),t.current===t.catch&&(l[t.error]=r),t.block.p(l,n)}function se(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function re(t){t&&t.c()}function te(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),he(()=>{const s=t.$$.on_mount.map(Ct).filter(je);t.$$.on_destroy?t.$$.on_destroy.push(...s):X(s),t.$$.on_mount=[]}),r.forEach(he)}function le(t,e){const n=t.$$;n.fragment!==null&&(ol(n.after_update),X(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function fl(t,e){t.$$.dirty[0]===-1&&(_e.push(t),il(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ie(t,e,n,l,r,s,i=null,a=[-1]){const o=Ce;ue(t);const c=t.$$={fragment:null,ctx:[],props:s,update:E,not_equal:r,bound:Ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Ge(),dirty:a,skip_bound:!1,root:e.target||o.$$.root};i&&i(c.root);let d=!1;if(c.ctx=n?n(t,e.props||{},(f,g,...h)=>{const m=h.length?h[0]:g;return c.ctx&&r(c.ctx[f],c.ctx[f]=m)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](m),d&&fl(t,f)),g}):[],c.update(),d=!0,X(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const f=Kt(e.target);c.fragment&&c.fragment.l(f),f.forEach(q)}else c.fragment&&c.fragment.c();e.intro&&P(t.$$.fragment),te(t,e.target,e.anchor),ze()}ue(o)}class ae{constructor(){Ne(this,"$$");Ne(this,"$$set")}$destroy(){le(this,1),this.$destroy=E}$on(e,n){if(!je(n))return E;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!Gt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const pl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pl);window["cartier-server-url"]="https://cartier-reold.koyeb.app";const ee={getRoot:async()=>await(await fetch(`${window["cartier-server-url"]}/`)).json(),getUserInfo:async t=>await(await fetch(`${window["cartier-server-url"]}/api/user?userid=${t}`)).json(),getPlaylistInfo:async t=>await(await fetch(`${window["cartier-server-url"]}/api/playlist?id=${t}`)).json(),getDownloadPlaylist:async t=>await(await fetch(`${window["cartier-server-url"]}/api/download?link=${t}`)).json(),getDownloadStatus:async t=>await(await fetch(`${window["cartier-server-url"]}/api/status?key=${t}`)).json(),getDownloadTrack:async(t,e="",n=!1)=>await(await fetch(`${window["cartier-server-url"]}/api/track?link=${t}&key=${e}&create=${n}`)).json(),getStreamPlaylist:async t=>{let e=await fetch(`${window["cartier-server-url"]}/api/stream?key=${t}`,{cache:"no-store"});return[await e.ok,await e.blob(),e.headers.get("x-trackid")]}},ve=[];function gl(t,e){return{subscribe:ge(t,e).subscribe}}function ge(t,e=E){let n;const l=new Set;function r(a){if(ne(t,a)&&(t=a,n)){const o=!ve.length;for(const c of l)c[1](),ve.push(c,t);if(o){for(let c=0;c<ve.length;c+=2)ve[c][0](ve[c+1]);ve.length=0}}}function s(a){r(a(t))}function i(a,o=E){const c=[a,o];return l.add(c),l.size===1&&(n=e(r,s)||E),a(t),()=>{l.delete(c),l.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:i}}function ml(t,e,n){const l=!Array.isArray(t),r=l?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return gl(n,(i,a)=>{let o=!1;const c=[];let d=0,f=E;const g=()=>{if(d)return;f();const m=e(l?c[0]:c,i,a);s?i(m):f=je(m)?m:E},h=r.map((m,y)=>We(m,S=>{c[y]=S,d&=~(1<<y),o&&g()},()=>{d|=1<<y}));return o=!0,g(),function(){X(h),f(),o=!1}})}function Ft(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Zt(t){const e=t-1;return e*e*e+1}function et(t,{delay:e=0,duration:n=400,easing:l=Ft,amount:r=5,opacity:s=0}={}){const i=getComputedStyle(t),a=+i.opacity,o=i.filter==="none"?"":i.filter,c=a*(1-s),[d,f]=Xt(r);return{delay:e,duration:n,easing:l,css:(g,h)=>`opacity: ${a-c*h}; filter: ${o} blur(${h*d}${f});`}}function tt(t,{delay:e=0,duration:n=400,easing:l=Zt,axis:r="y"}={}){const s=getComputedStyle(t),i=+s.opacity,a=r==="y"?"height":"width",o=parseFloat(s[a]),c=r==="y"?["top","bottom"]:["left","right"],d=c.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),f=parseFloat(s[`padding${d[0]}`]),g=parseFloat(s[`padding${d[1]}`]),h=parseFloat(s[`margin${d[0]}`]),m=parseFloat(s[`margin${d[1]}`]),y=parseFloat(s[`border${d[0]}Width`]),S=parseFloat(s[`border${d[1]}Width`]);return{delay:e,duration:n,easing:l,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*i};${a}: ${v*o}px;padding-${c[0]}: ${v*f}px;padding-${c[1]}: ${v*g}px;margin-${c[0]}: ${v*h}px;margin-${c[1]}: ${v*m}px;border-${c[0]}-width: ${v*y}px;border-${c[1]}-width: ${v*S}px;`}}function lt(t,{delay:e=0,duration:n=400,easing:l=Zt,start:r=0,opacity:s=0}={}){const i=getComputedStyle(t),a=+i.opacity,o=i.transform==="none"?"":i.transform,c=1-r,d=a*(1-s);return{delay:e,duration:n,easing:l,css:(f,g)=>`
			transform: ${o} scale(${1-c*g});
			opacity: ${a-d*g}
		`}}function nt(t){let e,n,l,r;const s=t[2].default,i=qt(s,t,t[1],null);return{c(){e=w("div"),n=w("div"),i&&i.c(),u(n,"class","bg-foreground p-2 rounded-md ring-1 ring-border max-w-[90vw] flex flex-col"),u(e,"class","absolute top-0 left-0 w-full h-full backdrop-blur-md flex flex-col items-center justify-center text-center text-xs")},m(a,o){A(a,e,o),p(e,n),i&&i.m(n,null),r=!0},p(a,o){i&&i.p&&(!r||o&2)&&Dt(i,s,a,a[1],r?Tt(s,a[1],o,null):Ot(a[1]),null)},i(a){r||(P(i,a),a&&he(()=>{r&&(l||(l=xe(e,et,{duration:500},!0)),l.run(1))}),r=!0)},o(a){I(i,a),a&&(l||(l=xe(e,et,{duration:500},!1)),l.run(0)),r=!1},d(a){a&&q(e),i&&i.d(a),a&&l&&l.end()}}}function hl(t){let e,n,l=!t[0]&&nt(t);return{c(){l&&l.c(),e=we()},m(r,s){l&&l.m(r,s),A(r,e,s),n=!0},p(r,[s]){r[0]?l&&(oe(),I(l,1,1,()=>{l=null}),ce()):l?(l.p(r,s),s&1&&P(l,1)):(l=nt(r),l.c(),P(l,1),l.m(e.parentNode,e))},i(r){n||(P(l),n=!0)},o(r){I(l),n=!1},d(r){r&&q(e),l&&l.d(r)}}}function wl(t,e,n){let{$$slots:l={},$$scope:r}=e,{hidden:s=!1}=e;return t.$$set=i=>{"hidden"in i&&n(0,s=i.hidden),"$$scope"in i&&n(1,r=i.$$scope)},[s,r,l]}class bl extends ae{constructor(e){super(),ie(this,e,wl,hl,ne,{hidden:0})}}function rt(t){let e,n;return{c(){e=Y("svg"),n=Y("path"),u(n,"stroke-linecap","round"),u(n,"stroke-linejoin","round"),u(n,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"class","aspect-square w-[1.2em] animate-spin inline")},m(l,r){A(l,e,r),p(e,n)},d(l){l&&q(e)}}}function vl(t){let e,n,l,r,s,i,a=t[0].step+"",o,c=t[0].is&&rt();return{c(){e=w("h1"),e.textContent="Starting Up Servers!",n=T(),l=w("p"),l.textContent=`Our servers take a little break every few minutes when things quiet down.
    We're in the process of waking them up for you. It's automatic, so no need
    to stress!`,r=T(),s=w("p"),c&&c.c(),i=T(),o=F(a),u(e,"class","text-2xl"),u(l,"class","text-xs text-white/70 inline"),u(s,"class","inline"),Xe(s,"text-green-500",!t[0].is)},m(d,f){A(d,e,f),A(d,n,f),A(d,l,f),A(d,r,f),A(d,s,f),c&&c.m(s,null),p(s,i),p(s,o)},p(d,f){d[0].is?c||(c=rt(),c.c(),c.m(s,i)):c&&(c.d(1),c=null),f&1&&a!==(a=d[0].step+"")&&Q(o,a),f&1&&Xe(s,"text-green-500",!d[0].is)},d(d){d&&(q(e),q(n),q(l),q(r),q(s)),c&&c.d()}}}function _l(t){let e,n;return e=new bl({props:{hidden:!t[0].is,$$slots:{default:[vl]},$$scope:{ctx:t}}}),{c(){re(e.$$.fragment)},m(l,r){te(e,l,r),n=!0},p(l,[r]){const s={};r&1&&(s.hidden=!l[0].is),r&9&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){le(e,l)}}}function yl(t,e,n){let l;const r=ge({step:"trying to make contact",is:!0});G(t,r,i=>n(0,l=i));let{handleWakeup:s}=e;return Re(()=>{j(r,l.step="waking up servers",l),ee.getRoot().then(i=>{j(r,l.is=!1,l),j(r,l.step="servers are running!",l),s(!0)}).catch(i=>{j(r,l.step="servers are unreachable (reload?)",l),s(!1)})}),t.$$set=i=>{"handleWakeup"in i&&n(2,s=i.handleWakeup)},[l,r,s]}class kl extends ae{constructor(e){super(),ie(this,e,yl,_l,ne,{handleWakeup:2})}}function $l(t){let e,n,l,r,s,i,a,o,c,d,f,g,h,m,y,S,v,D,C,x,k,$,b,M,_;return{c(){e=w("div"),n=w("div"),l=w("p"),l.textContent="Welcome aboard!",r=T(),s=w("div"),i=w("div"),a=w("label"),o=w("input"),c=T(),d=w("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline rounded-full"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg>',f=T(),g=w("p"),g.textContent="copy your Spotify profile link from your account page",h=T(),m=w("div"),y=w("div"),S=w("label"),v=w("input"),D=T(),C=w("span"),C.textContent="save",x=T(),k=w("button"),k.textContent="continue",$=T(),b=w("details"),b.innerHTML=`<summary class="font-bold mb-2">Know Cartier Manager, The Free Spotify Playlist Downloader</summary> <p class="mb-4">Mobile-friendly, free-to-use Spotify playlist downloader. Share your
          Spotify profile link to effortlessly download all your public
          playlists.</p> <p>Powered by <code>spotify-dl</code> on our servers, Cartier finds and downloads
          songs from YouTube and Deezer based on Spotify data.</p>`,u(l,"class","text-3xl font-black text-white border-border border-b-2 rounded-xl px-2 pb-1"),u(o,"id","spotifyprofilelinkinput"),u(o,"type","text"),u(o,"class","w-full"),u(o,"placeholder","type Spotify profile link"),u(o,"autocomplete","url"),u(o,"aria-label","type spotify profile link"),u(a,"for","spotifyprofilelinkinput"),u(d,"class","bg-background text-white ring-1 ring-border"),u(d,"aria-label","paste spotify profile link from clipboard"),u(i,"class","w-full flex flex-row items-center justify-center space-x-2"),u(g,"class","text-xs svg-icon mt-[0.5em]"),u(s,"class","flex flex-col items-center justify-center"),u(v,"type","checkbox"),u(v,"id","dopersistbtn"),u(v,"class","inline"),u(C,"class","align-middle"),u(S,"for","dopersistbtn"),u(S,"class","text-base flex flex-row space-x-2 bg-black p-2 rounded-md"),u(k,"class","hover:scale-110"),u(y,"class","flex flex-row items-center justify-center space-x-3"),u(b,"class","text-xs w-11/12"),u(m,"class","flex flex-col space-x-[0.5em]"),u(n,"class","flex flex-col items-center text-center justify-center bg-foreground ring-1 ring-border rounded-md w-11/12 space-y-7 p-3 max-w-[90vw] h-full"),u(e,"class","flex flex-col justify-center items-center")},m(L,O){A(L,e,O),p(e,n),p(n,l),p(n,r),p(n,s),p(s,i),p(i,a),p(a,o),Oe(o,t[0]),p(i,c),p(i,d),p(s,f),p(s,g),p(n,h),p(n,m),p(m,y),p(y,S),p(S,v),v.checked=t[1],p(S,D),p(S,C),p(y,x),p(y,k),p(m,$),p(m,b),M||(_=[H(o,"input",t[5]),H(d,"click",t[2]),H(v,"change",t[6]),H(k,"click",t[3])],M=!0)},p(L,[O]){O&1&&o.value!==L[0]&&Oe(o,L[0]),O&2&&(v.checked=L[1])},i:E,o:E,d(L){L&&q(e),M=!1,X(_)}}}function xl(t,e,n){let{handleUserid:l}=e,r="",s=!0;const i=async()=>{navigator.clipboard.readText?n(0,r=await navigator.clipboard.readText()):W("unable to use the clipboard",!1,.5)},a=()=>{let d;try{d=new URL(r)}catch{n(0,r="");return}const f=d.pathname.split("/")[2];s&&(localStorage.setItem("cartier-userid",f),W("login information saved!")),l(f)};function o(){r=this.value,n(0,r)}function c(){s=this.checked,n(1,s)}return t.$$set=d=>{"handleUserid"in d&&n(4,l=d.handleUserid)},[r,s,i,a,l,o,c]}class Sl extends ae{constructor(e){super(),ie(this,e,xl,$l,ne,{handleUserid:4})}}function Ll(t){return new Worker("/cartier/assets/fsWorker-B9RzAFl3.js",{name:t==null?void 0:t.name})}var N=(t=>(t[t.PLAYLISTS=0]="PLAYLISTS",t[t.DOWNLOADED=1]="DOWNLOADED",t[t.SETTINGS=2]="SETTINGS",t[t.ACCOUNT=3]="ACCOUNT",t))(N||{});const U=ge({logged:!1,offline:!0,user:{},playlists:{all:[],undownloaded:[],downloaded:[]},view:{tab:0}}),Ye=ml(U,(t,e)=>{e(t.view)}),Me=ge({handle:{root:{},cartierFile:{},tracksDir:{}},workerLock:void 0}),J=ge({playlists:[],tracks:[],info:{type:"cartier-file",version:1},data:{}}),Be={write:async(t,e)=>{const n=new Ll,l=Math.random();return n.postMessage({mode:"write",path:t,content:e,id:l}),new Promise((r,s)=>{n.addEventListener("message",i=>{i.data==l&&(console.log(`[FS-CONN]: ${l} finished successfully`),r())})})}},fe={setOPFSHandle:async()=>{let t=Z(Me);t.handle.root=await navigator.storage.getDirectory(),t.handle.cartierFile=await t.handle.root.getFileHandle("cartier.json",{create:!0}),t.handle.tracksDir=await t.handle.root.getDirectoryHandle("tracks",{create:!0}),Me.set(t)},bufferCartierFile:async()=>{const e=await Z(Me).handle.cartierFile.getFile();e.size==0?await Be.write("cartier.json",JSON.stringify(Z(J))):J.set(JSON.parse(await e.text())),J.subscribe(async n=>{await Be.write("cartier.json",JSON.stringify(n))})},initCartierFile:async()=>{await fe.setOPFSHandle(),await fe.bufferCartierFile()},login:async(t="",e={})=>{if(Object.keys(e).length==0){if(e=await ee.getUserInfo(t),e.success==!1)return!1;e=e.data;let r=Z(J);r.data=e,J.set(r)}let n=Z(U),l=Z(J);n={...n,...e,logged:!0},!l.playlists||l.playlists.length==0?n.playlists.undownloaded=n.playlists.all:n.playlists.undownloaded=n.playlists.all.filter(r=>l.playlists.some(s=>s.id!=r.id)),U.set(n)},logout:async()=>{localStorage.removeItem("cartier-userid"),U.update(t=>(t.logged=!1,t.playlists={all:[],downloaded:[]},t.user={},t))},init:async t=>{await fe.initCartierFile();let e=Z(U),n=Z(J);n.data&&Object.keys(n.data).length>0&&(e.offline?await fe.login("",n.data):await fe.login(n.data.user.id)),t()}};function st(t,e,n){const l=t.slice();return l[8]=e[n][0],l[9]=e[n][1],l}function it(t){let e,n;return{c(){e=Y("svg"),n=Y("path"),u(n,"stroke-linecap","round"),u(n,"stroke-linejoin","round"),u(n,"d","M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"),u(n,"class","svelte-1qpwcl7"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"class","w-[0.75em] mr-[1px] svelte-1qpwcl7")},m(l,r){A(l,e,r),p(e,n)},d(l){l&&q(e)}}}function Ml(t){return{c:E,m:E,p:E,d:E}}function Cl(t){let e=t[9]+"",n,l;return{c(){n=F(e),l=T()},m(r,s){A(r,n,s),A(r,l,s)},p(r,s){s&1&&e!==(e=r[9]+"")&&Q(n,e)},d(r){r&&(q(n),q(l))}}}function ql(t){let e;return{c(){e=F(`loading
            `)},m(n,l){A(n,e,l)},p:E,d(n){n&&q(e)}}}function at(t){let e,n,l=t[8].startsWith("r"),r,s=t[8].slice(1).split("_").join(" ")+"",i,a,o,c,d=l&&it(),f={ctx:t,current:null,token:null,hasCatch:!1,pending:ql,then:Cl,catch:Ml,value:9};return Ke(c=t[9](),f),{c(){e=w("tr"),n=w("td"),d&&d.c(),r=T(),i=F(s),a=T(),o=w("td"),f.block.c(),u(n,"class","svg-icon p-2 svelte-1qpwcl7"),u(o,"class","bg-transparent border-l-2 border-border svelte-1qpwcl7"),u(e,"class","odd:bg-foreground even:bg-background svelte-1qpwcl7")},m(g,h){A(g,e,h),p(e,n),d&&d.m(n,null),p(n,r),p(n,i),p(e,a),p(e,o),f.block.m(o,f.anchor=null),f.mount=()=>o,f.anchor=null},p(g,h){t=g,h&1&&(l=t[8].startsWith("r")),l?d||(d=it(),d.c(),d.m(n,r)):d&&(d.d(1),d=null),h&1&&s!==(s=t[8].slice(1).split("_").join(" ")+"")&&Q(i,s),f.ctx=t,h&1&&c!==(c=t[9]())&&Ke(c,f)||dl(f,t,h)},d(g){g&&q(e),d&&d.d(),f.block.d(),f.token=null,f=null}}}function Al(t){let e,n,l,r,s,i,a,o,c,d,f,g,h,m,y,S,v,D,C,x=se(Object.entries(t[0])),k=[];for(let $=0;$<x.length;$+=1)k[$]=at(st(t,x,$));return{c(){e=w("div"),n=w("table"),l=w("thead"),l.innerHTML='<th class="svelte-1qpwcl7">setting</th><th class="svelte-1qpwcl7">value</th>',r=T(),s=w("tbody");for(let $=0;$<k.length;$+=1)k[$].c();i=T(),a=w("div"),o=w("button"),o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path fill-rule="evenodd" d="M8.478 1.6a.75.75 0 0 1 .273 1.026 3.72 3.72 0 0 0-.425 1.121c.058.058.118.114.18.168A4.491 4.491 0 0 1 12 2.25c1.413 0 2.673.651 3.497 1.668.06-.054.12-.11.178-.167a3.717 3.717 0 0 0-.426-1.125.75.75 0 1 1 1.298-.752 5.22 5.22 0 0 1 .671 2.046.75.75 0 0 1-.187.582c-.241.27-.505.52-.787.749a4.494 4.494 0 0 1 .216 2.1c-.106.792-.753 1.295-1.417 1.403-.182.03-.364.057-.547.081.152.227.273.476.359.742a23.122 23.122 0 0 0 3.832-.803 23.241 23.241 0 0 0-.345-2.634.75.75 0 0 1 1.474-.28c.21 1.115.348 2.256.404 3.418a.75.75 0 0 1-.516.75c-1.527.499-3.119.854-4.76 1.049-.074.38-.22.735-.423 1.05 2.066.209 4.058.672 5.943 1.358a.75.75 0 0 1 .492.75 24.665 24.665 0 0 1-1.189 6.25.75.75 0 0 1-1.425-.47 23.14 23.14 0 0 0 1.077-5.306c-.5-.169-1.009-.32-1.524-.455.068.234.104.484.104.746 0 3.956-2.521 7.5-6 7.5-3.478 0-6-3.544-6-7.5 0-.262.037-.511.104-.746-.514.135-1.022.286-1.522.455.154 1.838.52 3.616 1.077 5.307a.75.75 0 1 1-1.425.468 24.662 24.662 0 0 1-1.19-6.25.75.75 0 0 1 .493-.749 24.586 24.586 0 0 1 4.964-1.24h.01c.321-.046.644-.085.969-.118a2.983 2.983 0 0 1-.424-1.05 24.614 24.614 0 0 1-4.76-1.05.75.75 0 0 1-.516-.75c.057-1.16.194-2.302.405-3.417a.75.75 0 0 1 1.474.28c-.164.862-.28 1.74-.345 2.634 1.237.371 2.517.642 3.832.803.085-.266.207-.515.359-.742a18.698 18.698 0 0 1-.547-.08c-.664-.11-1.311-.612-1.417-1.404a4.535 4.535 0 0 1 .217-2.103 6.788 6.788 0 0 1-.788-.751.75.75 0 0 1-.187-.583 5.22 5.22 0 0 1 .67-2.04.75.75 0 0 1 1.026-.273Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <a href="https://github.com/reold/cartier/issues/new" target="_blank" class="svelte-1qpwcl7">report a bug</a>',c=T(),d=w("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path d="M4.08 5.227A3 3 0 0 1 6.979 3H17.02a3 3 0 0 1 2.9 2.227l2.113 7.926A5.228 5.228 0 0 0 18.75 12H5.25a5.228 5.228 0 0 0-3.284 1.153L4.08 5.227Z" class="svelte-1qpwcl7"></path><path fill-rule="evenodd" d="M5.25 13.5a3.75 3.75 0 1 0 0 7.5h13.5a3.75 3.75 0 1 0 0-7.5H5.25Zm10.5 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm3.75-.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">Render Server</p>',f=T(),g=w("button"),g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path d="M4.08 5.227A3 3 0 0 1 6.979 3H17.02a3 3 0 0 1 2.9 2.227l2.113 7.926A5.228 5.228 0 0 0 18.75 12H5.25a5.228 5.228 0 0 0-3.284 1.153L4.08 5.227Z" class="svelte-1qpwcl7"></path><path fill-rule="evenodd" d="M5.25 13.5a3.75 3.75 0 1 0 0 7.5h13.5a3.75 3.75 0 1 0 0-7.5H5.25Zm10.5 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm3.75-.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">Koyeb server</p>',h=T(),m=w("button"),m.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] svelte-1qpwcl7"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">refresh</p> ',y=w("button"),y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path fill-rule="evenodd" d="M16.5 3.75a1.5 1.5 0 0 1 1.5 1.5v13.5a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-1.5-1.5V15a.75.75 0 0 0-1.5 0v3.75a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3V5.25a3 3 0 0 0-3-3h-6a3 3 0 0 0-3 3V9A.75.75 0 1 0 9 9V5.25a1.5 1.5 0 0 1 1.5-1.5h6Zm-5.03 4.72a.75.75 0 0 0 0 1.06l1.72 1.72H2.25a.75.75 0 0 0 0 1.5h10.94l-1.72 1.72a.75.75 0 1 0 1.06 1.06l3-3a.75.75 0 0 0 0-1.06l-3-3a.75.75 0 0 0-1.06 0Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">logout</p>',S=T(),v=w("button"),v.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[1em] svelte-1qpwcl7"><path fill-rule="evenodd" d="M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z" clip-rule="evenodd" class="svelte-1qpwcl7"></path></svg> <p class="svelte-1qpwcl7">delete all downloads</p>',u(l,"class","text-xl svelte-1qpwcl7"),u(s,"class","svelte-1qpwcl7"),u(n,"class","text-sm ring-1 ring-border rounded-sm min-w-[95vw] svelte-1qpwcl7"),u(o,"class","bg-black text-white svg-icon col-span-5 svelte-1qpwcl7"),u(d,"class","bg-orange-500 text-black svg-icon col-span-5 svelte-1qpwcl7"),u(g,"class","bg-orange-500 text-black svg-icon col-span-5 svelte-1qpwcl7"),u(m,"class","bg-primary text-black svg-icon col-span-5 svelte-1qpwcl7"),u(y,"class","bg-red-500 text-white svg-icon col-span-10 svelte-1qpwcl7"),u(v,"class","bg-red-500 text-white svg-icon col-span-10 svelte-1qpwcl7"),u(a,"class","grid grid-cols-10 gap-2 btns-tab font-bold min-w-[95vw] svelte-1qpwcl7"),u(e,"class","h-[100vh] overflow-y-scroll w-[100vw] flex flex-col items-center justify-center pb-[15vh] svelte-1qpwcl7")},m($,b){A($,e,b),p(e,n),p(n,l),p(n,r),p(n,s);for(let M=0;M<k.length;M+=1)k[M]&&k[M].m(s,null);p(e,i),p(e,a),p(a,o),p(a,c),p(a,d),p(a,f),p(a,g),p(a,h),p(a,m),p(a,y),p(a,S),p(a,v),D||(C=[H(o,"click",t[2]),H(d,"click",t[4]),H(g,"click",t[5]),H(m,"click",t[2]),H(y,"click",t[3]),H(v,"click",t[1])],D=!0)},p($,[b]){if(b&1){x=se(Object.entries($[0]));let M;for(M=0;M<x.length;M+=1){const _=st($,x,M);k[M]?k[M].p(_,b):(k[M]=at(_),k[M].c(),k[M].m(s,null))}for(;M<k.length;M+=1)k[M].d(1);k.length=x.length}},i:E,o:E,d($){$&&q(e),Se(k,$),D=!1,X(C)}}}function Tl(t,e,n){let l,r;G(t,U,f=>n(6,l=f)),G(t,Me,f=>n(7,r=f));let s={};const i=()=>{W("deleting all downloads and refreshing",!0,10,async f=>{await r.handle.root.removeEntry("tracks",{recursive:!0}),await r.handle.root.removeEntry("cartier.json"),f(),window.location.reload()})},a=()=>{n(0,s={ruserid:()=>localStorage.getItem("cartier-userid")||"not saved",rserver:()=>new URL(window["cartier-server-url"]).host,rOPFS_used:async()=>{let f=0;const g=await navigator.storage.estimate();return g&&(f=(g.usage||0)/1024**2),`${f.toFixed(1)} MB`},rFE_update:async()=>{if(!l.offline){const g=await(await fetch("https://api.github.com/repos/reold/cartier/deployments")).json(),h=new Date(g[0].updated_at),y=new Date().getTime()-h.getTime(),S=Math.floor(y/1e3),v=Math.floor(S/60),D=Math.floor(v/60),C=Math.floor(D/24);let x;return C>0?x=C===1?"1 day":`${C} days`:D>0?x=D===1?"1 hour":`${D} hours`:v>0?x=v===1?"1 minute":`${v} minutes`:x=S===1?"1 second":`${S} seconds`,`${x} ago by ${g[0].creator.login}`}},roffline:()=>l.offline,wthank_you_for:()=>"testing our beta version! ❤️"})};return Re(a),[s,i,a,async()=>{await fe.logout()},()=>{window["cartier-server-url"]="https://cartier-backend-1.onrender.com",W("waking up Render server",!0,10,async f=>{await ee.getRoot(),f(),a()})},()=>{window["cartier-server-url"]="https://cartier-reold.koyeb.app",W("waking up Koyeb server",!0,10,async f=>{await ee.getRoot(),f(),a()})}]}class Dl extends ae{constructor(e){super(),ie(this,e,Tl,Al,ne,{})}}const R=ge({loaded:!1,queue:[],q_index:-1,playback:{handle:{},id:"",name:"",dur:1,time:0,playing:!1,source:""}});R.subscribe(t=>{navigator.mediaSession.playbackState=t.playback.playing?"playing":"paused"});const B={play:async()=>{let t=Z(R);t.loaded||(t.loaded=!0),t.playback.playing=!0;const n=await(await Z(Me).handle.tracksDir.getFileHandle(`${t.playback.id}.mp3`)).getFile(),l=URL.createObjectURL(n);t.playback.handle=new Audio(l),t.playback.handle.play(),R.set(t),B.mediaSession.loadSession(),t.playback.handle.addEventListener("loadeddata",()=>{R.update(s=>(s.playback.dur=s.playback.handle.duration,s))}),t.playback.handle.addEventListener("timeupdate",()=>{R.update(s=>(s.playback.time=s.playback.handle.currentTime,s))});const r=()=>{B.next()&&B.play()};t.playback.handle.addEventListener("ended",r),navigator.mediaSession.setActionHandler("nexttrack",r),navigator.mediaSession.setActionHandler("previoustrack",()=>{B.previous()&&B.play()}),navigator.mediaSession.setActionHandler("pause",B.pause),navigator.mediaSession.setActionHandler("play",B.resume),navigator.mediaSession.setActionHandler("seekto",s=>{s.seekTime&&(t.playback.handle.currentTime=s.seekTime)})},pause:()=>{let t=Z(R);t.playback.handle.pause(),t.playback.playing=!1,R.set(t)},resume:()=>{let t=Z(R);t.playback.handle.play(),t.playback.playing=!0,R.set(t)},next:()=>{let t=Z(R),e=t.queue[t.q_index+1];return e?(t.q_index++,t.playback.playing&&B.pause(),t.playback.name=e.name,t.playback.id=e.id,t.playback.source=e.source,R.set(t),!0):!1},previous:()=>{let t=Z(R),e=t.queue[t.q_index-1];return e?(t.q_index--,t.playback.playing&&B.pause(),t.playback.name=e.name,t.playback.id=e.id,t.playback.source=e.source,R.set(t),!0):!1},queue:{addTrack:(t,e,n=!1)=>{let l=Z(R),r=Z(J);for(let s of r.tracks)if(s.id==t){n?l.queue.splice(l.q_index+1,0,{id:t,name:s.name,source:e}):l.queue=[...l.queue,{id:t,name:s.name,source:e}];break}R.set(l)},addPlaylist:(t,e=!1)=>{const l=Z(J).playlists.find(r=>r.id==t);l&&(e&&l.tracks.reverse(),l.tracks.forEach(r=>{B.queue.addTrack(r,l.name,e)}))}},mediaSession:{loadSession:()=>{let t=Z(R);navigator.mediaSession.metadata=new MediaMetadata({title:t.playback.name})}}};function ot(t,e,n){const l=t.slice();return l[6]=e[n],l}function ct(t){let e,n,l,r=t[6].name+"",s,i;return{c(){e=w("li"),n=Y("svg"),l=Y("path"),s=F(r),i=T(),u(l,"fill-rule","evenodd"),u(l,"d","M19.952 1.651a.75.75 0 0 1 .298.599V16.303a3 3 0 0 1-2.176 2.884l-1.32.377a2.553 2.553 0 1 1-1.403-4.909l2.311-.66a1.5 1.5 0 0 0 1.088-1.442V6.994l-9 2.572v9.737a3 3 0 0 1-2.176 2.884l-1.32.377a2.553 2.553 0 1 1-1.402-4.909l2.31-.66a1.5 1.5 0 0 0 1.088-1.442V5.25a.75.75 0 0 1 .544-.721l10.5-3a.75.75 0 0 1 .658.122Z"),u(l,"clip-rule","evenodd"),u(n,"xmlns","http://www.w3.org/2000/svg"),u(n,"viewBox","0 0 24 24"),u(n,"fill","currentColor"),u(n,"class","w-[2ch] inline mr-1"),u(e,"class","truncate")},m(a,o){A(a,e,o),p(e,n),p(n,l),p(e,s),p(e,i)},p(a,o){o&2&&r!==(r=a[6].name+"")&&Q(s,r)},d(a){a&&q(e)}}}function Ol(t){let e,n,l,r=t[0].name+"",s,i,a,o,c=t[0].owner+"",d,f,g,h,m,y,S,v,D,C,x,k=se(t[1]),$=[];for(let b=0;b<k.length;b+=1)$[b]=ct(ot(t,k,b));return{c(){e=w("div"),n=w("div"),l=w("p"),s=F(r),i=T(),a=w("p"),o=F("by "),d=F(c),f=T(),g=w("ol");for(let b=0;b<$.length;b+=1)$[b].c();h=T(),m=w("button"),m.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path fill-rule="evenodd" d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z" clip-rule="evenodd"></path></svg>',y=T(),S=w("button"),S.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path d="M5.625 3.75a2.625 2.625 0 1 0 0 5.25h12.75a2.625 2.625 0 0 0 0-5.25H5.625ZM3.75 11.25a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5H3.75ZM3 15.75a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75ZM3.75 18.75a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5H3.75Z"></path></svg>',v=T(),D=w("button"),D.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path fill-rule="evenodd" d="M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z" clip-rule="evenodd"></path></svg>',u(l,"class","text-xl font-bold"),u(a,"class","-mt-1"),u(n,"class","flex flex-col items-center justify-center space-x-2 col-span-2 row-span-3"),u(g,"class","ring-1 ring-border col-span-3 row-span-2 p-[2px] rounded-t-md bg-foreground overflow-x-hidden overflow-y-scroll"),u(m,"class","svg-icon ring-1 ring-border p-0 text-xs rounded-none rounded-bl-md"),u(S,"class","svg-icon ring-1 ring-border p-0 text-xs rounded-none"),u(D,"class","svg-icon ring-1 ring-border bg-red-500 text-white p-0 text-xs rounded-none rounded-br-md"),u(e,"class","bg-green-600 ring-1 ring-border w-[95%] rounded-md min-h-[15vh] max-h-[20vh] text-xs grid grid-cols-5 grid-rows-3")},m(b,M){A(b,e,M),p(e,n),p(n,l),p(l,s),p(n,i),p(n,a),p(a,o),p(a,d),p(e,f),p(e,g);for(let _=0;_<$.length;_+=1)$[_]&&$[_].m(g,null);p(e,h),p(e,m),p(e,y),p(e,S),p(e,v),p(e,D),C||(x=[H(m,"click",t[3]),H(S,"click",t[4]),H(D,"click",t[2])],C=!0)},p(b,[M]){if(M&1&&r!==(r=b[0].name+"")&&Q(s,r),M&1&&c!==(c=b[0].owner+"")&&Q(d,c),M&2){k=se(b[1]);let _;for(_=0;_<k.length;_+=1){const L=ot(b,k,_);$[_]?$[_].p(L,M):($[_]=ct(L),$[_].c(),$[_].m(g,null))}for(;_<$.length;_+=1)$[_].d(1);$.length=k.length}},i:E,o:E,d(b){b&&q(e),Se($,b),C=!1,X(x)}}}function Pl(t,e,n){let l;G(t,J,c=>n(5,l=c));let{playlist:r}=e,s=[];const i=()=>{let c=l.playlists;c.splice(l.playlists.indexOf(r),1),j(J,l.playlists=c,l),W(`removed "${r.name}" from downloads`,!1,2)},a=()=>{B.queue.addPlaylist(r.id,!0),B.next(),B.play()},o=()=>{B.queue.addPlaylist(r.id),W(`"${r.name}" added to queue`)};return t.$$set=c=>{"playlist"in c&&n(0,r=c.playlist)},t.$$.update=()=>{t.$$.dirty&35&&(n(1,s=[]),r.tracks.forEach(c=>{for(let d of l.tracks)if(d.id==c){n(1,s=[...s,{id:d.id,name:d.name}]);break}}))},[r,s,i,a,o,l]}class Bt extends ae{constructor(e){super(),ie(this,e,Pl,Ol,ne,{playlist:0})}}const Te={loadPlaylistInfo:async t=>{let e=Z(U);const n=Te._getPlaylist(t);if(!n)return;const r=new URL(n.external_url).pathname.split("/")[2];let s=await ee.getPlaylistInfo(r);return e=Z(U),e.playlists.all.map(i=>(i.id==t&&(i.tracks=s),i)),U.set(e),n},downloadPlaylist:async t=>{let e=Te._getPlaylist(t);if(!e||(e.tracks||(e=await Te.loadPlaylistInfo(t)),!e.tracks)||e.tracks.length==0)return;$info.downloading=!0,$info.download.stage="converting",progress.set(0,{duration:1}),progress.set(10,{duration:1e4});let n=e.tracks;if(n=n.filter(r=>{let s=!1;for(let i of $CartierFile.tracks)if(r.id==i.id){s=!0;break}return s&&($info.download.status[r.id]="ready"),!s}),n.length==0){await progress.set(100,{duration:500}),$info.downloading=!1,$info.download.done=!0;return}let l=n[0];ee.getDownloadTrack(l.url,"",!0).then(async r=>{if(r.success==!1){$progress=0,$info.downloading=!1,notify(`serverErr: ${r.info}`);return}const s=r.data.key;$info.download.status[l.id]="downloading";for(const[a,o]of[...n].splice(1).entries())$info.download.status[o.id]="downloading",(await ee.getDownloadTrack(o.url,s,!1)).success==!1&&notify(`failed downloading track (${o.name})`);await progress.set(10);const i=async()=>{let a=await ee.getDownloadStatus(s);const o=a.data.filter(c=>c.status!=="downloading");if(a.data.forEach(c=>{$info.download.status[c.id]=c.status}),$progress=o.length/a.data.length*40+10,o.length==a.data.length){$info.download.stage="downloading";for(let c=0;c<o.length;c++){let[d,f,g]=await ee.getStreamPlaylist(s);if(!d){const h=e.tracks.find(m=>m.id==g);h?notify(`failed downloading "${h==null?void 0:h.name.slice(0,10)}${(h==null?void 0:h.name.length)>10?"...":""}" in "${e.name}"`,!1,5):notify(`failed downloading a track in "${e.name}"`,!1,5),$info.download.status[g]="failed";continue}$info.memblobs=[...$info.memblobs,{blob:f,id:g}],$progress=(c+1)/o.length*50+50}await progress.set(100,{duration:500}),$info.downloading=!1,$info.download.done=!0;return}setTimeout(i,7500)};setTimeout(i,5e3)})},_getPlaylist:t=>Z(U).playlists.all.find(n=>n.id==t)};function ut(t){return Object.prototype.toString.call(t)==="[object Date]"}function Ue(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((r,s)=>Ue(t[s],r));return r=>l.map(s=>s(r))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(ut(t)&&ut(e)){t=t.getTime(),e=e.getTime();const s=e-t;return i=>new Date(t+i*s)}const l=Object.keys(e),r={};return l.forEach(s=>{r[s]=Ue(t[s],e[s])}),s=>{const i={};return l.forEach(a=>{i[a]=r[a](s)}),i}}if(n==="number"){const l=e-t;return r=>t+r*l}throw new Error(`Cannot interpolate ${n} values`)}function Ut(t,e={}){const n=ge(t);let l,r=t;function s(i,a){if(t==null)return n.set(t=i),Promise.resolve();r=i;let o=l,c=!1,{delay:d=0,duration:f=400,easing:g=Mt,interpolate:h=Ue}=Fe(Fe({},e),a);if(f===0)return o&&(o.abort(),o=null),n.set(t=r),Promise.resolve();const m=Et()+d;let y;return l=Nt(S=>{if(S<m)return!0;c||(y=h(t,i),typeof f=="function"&&(f=f(t,i)),c=!0),o&&(o.abort(),o=null);const v=S-m;return v>f?(n.set(t=i),!1):(n.set(t=y(g(v/f))),!0)}),l.promise}return{set:s,update:(i,a)=>s(i(r,t),a),subscribe:n.subscribe}}function dt(t,e,n){const l=t.slice();return l[16]=e[n],l}function ft(t){let e,n,l,r,s,i,a,o,c=t[0].name+"",d,f,g,h,m,y,S,v=!t[1]&&pt(t);function D(L,O){return!L[1]&&L[0].images&&L[0].images.length>0?jl:El}let C=D(t),x=C(t);function k(L,O){return L[0].description?Hl:Nl}let $=k(t),b=$(t),M=!t[1]&&gt(t),_=t[4].showMore&&mt(t);return{c(){e=w("div"),n=w("div"),v&&v.c(),l=T(),r=w("div"),s=w("div"),x.c(),i=T(),a=w("div"),o=w("p"),d=F(c),f=T(),g=w("p"),b.c(),h=T(),M&&M.c(),m=T(),y=w("div"),S=T(),_&&_.c(),u(o,"class","text-left truncate font-bold -mb-1"),u(g,"class","text-left text-xs truncate mb-2"),u(a,"class","flex flex-col col-span-9"),u(s,"class","grid grid-cols-12 h-full grid-rows-1 items-center justify-center"),u(r,"class","absolute w-full h-full rounded-md"),u(n,"class","w-full h-[15vh] rounded-md relative overflow-hidden ring-1 ring-border bg-foreground"),u(y,"class","bg-primary h-[2px]"),pe(y,"width",t[5]+"%"),u(e,"class","w-[95%]")},m(L,O){A(L,e,O),p(e,n),v&&v.m(n,null),p(n,l),p(n,r),p(r,s),x.m(s,null),p(s,i),p(s,a),p(a,o),p(o,d),p(a,f),p(a,g),b.m(g,null),p(a,h),M&&M.m(a,null),p(e,m),p(e,y),p(e,S),_&&_.m(e,null)},p(L,O){L[1]?v&&(v.d(1),v=null):v?v.p(L,O):(v=pt(L),v.c(),v.m(n,l)),C===(C=D(L))&&x?x.p(L,O):(x.d(1),x=C(L),x&&(x.c(),x.m(s,i))),O&1&&c!==(c=L[0].name+"")&&Q(d,c),$===($=k(L))&&b?b.p(L,O):(b.d(1),b=$(L),b&&(b.c(),b.m(g,null))),L[1]?M&&(M.d(1),M=null):M?M.p(L,O):(M=gt(L),M.c(),M.m(a,null)),O&32&&pe(y,"width",L[5]+"%"),L[4].showMore?_?(_.p(L,O),O&16&&P(_,1)):(_=mt(L),_.c(),P(_,1),_.m(e,null)):_&&(oe(),I(_,1,1,()=>{_=null}),ce())},d(L){L&&q(e),v&&v.d(),x.d(),b.d(),M&&M.d(),_&&_.d()}}}function pt(t){let e,n;return{c(){e=w("div"),u(e,"class","absolute w-full h-full rounded-md blur-[2px]"),u(e,"style",n=t[0].images&&t[0].images[0]?`background-image: url('${t[0].images[0].url}');
    background-position: center;
    background-size: cover;
    background-blend-mode: multiply;
    background-color: rgba(0, 0, 0, 0.6)
    `:"background-color: #22272E")},m(l,r){A(l,e,r)},p(l,r){r&1&&n!==(n=l[0].images&&l[0].images[0]?`background-image: url('${l[0].images[0].url}');
    background-position: center;
    background-size: cover;
    background-blend-mode: multiply;
    background-color: rgba(0, 0, 0, 0.6)
    `:"background-color: #22272E")&&u(e,"style",n)},d(l){l&&q(e)}}}function El(t){let e,n;return{c(){e=Y("svg"),n=Y("path"),u(n,"stroke-linecap","round"),u(n,"stroke-linejoin","round"),u(n,"d","M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"class","w-[10vh] h-[10vh] col-span-3 m-auto")},m(l,r){A(l,e,r),p(e,n)},p:E,d(l){l&&q(e)}}}function jl(t){let e,n;return{c(){e=w("img"),u(e,"loading","lazy"),$e(e.src,n=t[0].images[0].url)||u(e,"src",n),u(e,"class","rounded-full max-h-[10vh] shadow-black shadow-md col-span-3 m-auto"),u(e,"alt","playlist's cover")},m(l,r){A(l,e,r)},p(l,r){r&1&&!$e(e.src,n=l[0].images[0].url)&&u(e,"src",n)},d(l){l&&q(e)}}}function Nl(t){let e,n=t[0].owner.display_name+"",l;return{c(){e=F("by "),l=F(n)},m(r,s){A(r,e,s),A(r,l,s)},p(r,s){s&1&&n!==(n=r[0].owner.display_name+"")&&Q(l,n)},d(r){r&&(q(e),q(l))}}}function Hl(t){let e=t[0].description+"",n;return{c(){n=F(e)},m(l,r){A(l,n,r)},p(l,r){r&1&&e!==(e=l[0].description+"")&&Q(n,e)},d(l){l&&q(n)}}}function gt(t){let e,n,l,r,s,i,a,o;function c(g,h){return g[4].download.done?Fl:Il}let d=c(t),f=d(t);return{c(){e=w("div"),n=w("button"),l=Y("svg"),r=Y("path"),i=T(),f.c(),u(r,"stroke-linecap","round"),u(r,"stroke-linejoin","round"),u(r,"d","m19.5 8.25-7.5 7.5-7.5-7.5"),u(l,"xmlns","http://www.w3.org/2000/svg"),u(l,"fill","none"),u(l,"viewBox","0 0 24 24"),u(l,"stroke-width","2"),u(l,"stroke","currentColor"),u(l,"class",s="w-[4ch] origin-center transition-transform duration-500 "+(t[4].showMore?"rotate-180":"")),u(n,"class","text-xs svg-icon bg-black/20 p-0 text-white disabled:bg-black/20 disabled:animate-bounce"),u(e,"class","flex flex-row justify-start items-center space-x-2 col-span-7")},m(g,h){A(g,e,h),p(e,n),p(n,l),p(l,r),t[13](n),p(e,i),f.m(e,null),a||(o=H(n,"click",t[12]),a=!0)},p(g,h){h&16&&s!==(s="w-[4ch] origin-center transition-transform duration-500 "+(g[4].showMore?"rotate-180":""))&&u(l,"class",s),d===(d=c(g))&&f?f.p(g,h):(f.d(1),f=d(g),f&&(f.c(),f.m(e,null)))},d(g){g&&q(e),t[13](null),f.d(),a=!1,o()}}}function Il(t){let e,n,l,r;function s(o,c){return o[4].downloading?Bl:Zl}let i=s(t),a=i(t);return{c(){e=w("button"),a.c(),u(e,"class","text-xs svg-icon"),e.disabled=n=t[4].downloading||t[4].download.done},m(o,c){A(o,e,c),a.m(e,null),l||(r=H(e,"click",t[11]),l=!0)},p(o,c){i===(i=s(o))&&a?a.p(o,c):(a.d(1),a=i(o),a&&(a.c(),a.m(e,null))),c&16&&n!==(n=o[4].downloading||o[4].download.done)&&(e.disabled=n)},d(o){o&&q(e),a.d(),l=!1,r()}}}function Fl(t){let e,n,l,r,s;return{c(){e=w("button"),e.textContent="save",n=T(),l=w("button"),l.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2ch]"><path fill-rule="evenodd" d="M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd"></path></svg>

                    local mp3`,u(e,"class","text-xs svg-icon bg-green-700 text-white"),u(l,"class","text-xs svg-icon")},m(i,a){A(i,e,a),A(i,n,a),A(i,l,a),r||(s=[H(e,"click",t[10]),H(l,"click",t[9])],r=!0)},p:E,d(i){i&&(q(e),q(n),q(l)),r=!1,X(s)}}}function Zl(t){let e,n,l;return{c(){e=Y("svg"),n=Y("path"),l=F(`

                      download`),u(n,"fill-rule","evenodd"),u(n,"d","M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z"),u(n,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","w-[2ch]")},m(r,s){A(r,e,s),p(e,n),A(r,l,s)},p:E,d(r){r&&(q(e),q(l))}}}function Bl(t){let e=t[4].download.stage+"",n;return{c(){n=F(e)},m(l,r){A(l,n,r)},p(l,r){r&16&&e!==(e=l[4].download.stage+"")&&Q(n,e)},d(l){l&&q(n)}}}function mt(t){let e,n,l,r=t[0].tracks.length+"",s,i,a,o,c,d=se(t[0].tracks),f=[];for(let g=0;g<d.length;g+=1)f[g]=ht(dt(t,d,g));return{c(){e=w("div"),n=w("div"),l=w("p"),s=F(r),i=F(" tracks"),a=T();for(let g=0;g<f.length;g+=1)f[g].c();u(l,"class","bg-primary rounded-full p-2 text-black"),u(n,"class","overflow-hidden overflow-x-scroll flex flex-row items-center space-x-2 p-2"),u(e,"class","-mt-1 w-full bg-foreground ring-1 ring-border rounded-b-md text-xs flex flex-row items-center justify-center")},m(g,h){A(g,e,h),p(e,n),p(n,l),p(l,s),p(l,i),p(n,a);for(let m=0;m<f.length;m+=1)f[m]&&f[m].m(n,null);c=!0},p(g,h){if((!c||h&1)&&r!==(r=g[0].tracks.length+"")&&Q(s,r),h&17){d=se(g[0].tracks);let m;for(m=0;m<d.length;m+=1){const y=dt(g,d,m);f[m]?f[m].p(y,h):(f[m]=ht(y),f[m].c(),f[m].m(n,null))}for(;m<f.length;m+=1)f[m].d(1);f.length=d.length}},i(g){c||(g&&he(()=>{c&&(o||(o=xe(e,tt,{duration:500},!0)),o.run(1))}),c=!0)},o(g){g&&(o||(o=xe(e,tt,{duration:500},!1)),o.run(0)),c=!1},d(g){g&&q(e),Se(f,g),g&&o&&o.end()}}}function Ul(t){let e;return{c(){e=w("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-[5vh]"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"></path></svg> ',u(e,"class","shadow-md shadow-black rounded-full")},m(n,l){A(n,e,l)},p:E,d(n){n&&q(e)}}}function Wl(t){let e,n,l;return{c(){e=w("img"),u(e,"loading","lazy"),$e(e.src,n=t[16].images[t[16].images.length-1].url)||u(e,"src",n),u(e,"class",l="aspect-square h-[5vh] ring-1 ring-border rounded-full shadow-sm shadow-black will-change-auto "+(t[4].downloading?(t[4].download.status[t[16].id]=="downloading"?" rotating-image":"")+(t[4].download.status[t[16].id]=="ready"?"ring-green-500":"")+(t[4].download.status[t[16].id]=="failed"?" ring-red-500":""):"")),u(e,"alt","album art")},m(r,s){A(r,e,s)},p(r,s){s&1&&!$e(e.src,n=r[16].images[r[16].images.length-1].url)&&u(e,"src",n),s&17&&l!==(l="aspect-square h-[5vh] ring-1 ring-border rounded-full shadow-sm shadow-black will-change-auto "+(r[4].downloading?(r[4].download.status[r[16].id]=="downloading"?" rotating-image":"")+(r[4].download.status[r[16].id]=="ready"?"ring-green-500":"")+(r[4].download.status[r[16].id]=="failed"?" ring-red-500":""):""))&&u(e,"class",l)},d(r){r&&q(e)}}}function ht(t){let e;function n(s,i){return s[16].images&&s[16].images.length>0?Wl:Ul}let l=n(t),r=l(t);return{c(){r.c(),e=we()},m(s,i){r.m(s,i),A(s,e,i)},p(s,i){l===(l=n(s))&&r?r.p(s,i):(r.d(1),r=l(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&q(e),r.d(s)}}}function Vl(t){let e,n=t[2]&&ft(t);return{c(){n&&n.c(),e=we()},m(l,r){n&&n.m(l,r),A(l,e,r)},p(l,[r]){l[2]?n?n.p(l,r):(n=ft(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:E,o:E,d(l){l&&q(e),n&&n.d(l)}}}function Rl(t,e,n){let l,r,s;G(t,J,C=>n(14,s=C));let{playlist:i}=e,{disabled:a=!1}=e,{visible:o=!0}=e,c;const d=ge({showMore:!1,detailedLoaded:!1,id:void 0,download:{stage:"",status:{},done:!1},downloading:!1,memblobs:[]});G(t,d,C=>n(4,l=C));let f=Ut(0,{duration:1e3,easing:Ft});G(t,f,C=>n(5,r=C));const g=async()=>{l.showMore?j(d,l.showMore=!1,l):(i.tracks||await h(),j(d,l.showMore=!0,l))},h=()=>new Promise((C,x)=>{W("loading playlist information",!0,1,async k=>{try{await Te.loadPlaylistInfo(i.id),C()}catch{W("couldn't load playlist information"),x()}k()})}),m=()=>{l.memblobs.forEach(({blob:C,id:x},k)=>{const $=URL.createObjectURL(C),b=document.createElement("a");b.href=$,b.download=`${x}.mp3`,b.click()})},y=()=>{W("saving to Cartier",!0,10,async C=>{var k,$;const x=s;for(let{blob:b,id:M}of l.memblobs){await Be.write(`tracks/${M}.mp3`,b);const _=((k=i.tracks)==null?void 0:k.find(L=>L.id==M))||{name:"unknown"};x.tracks=[...x.tracks,{id:M,name:_.name,dependants:[]}]}x.playlists=[...x.playlists,{name:i.name,url:i.external_url,desc:i.description,owner:i.owner.display_name,tracks:[...($=i.tracks)==null?void 0:$.map(b=>b.id)],id:i.id}];for(let b of i.tracks)for(let[M,_]of x.tracks.entries())if(_.id==b.id){x.tracks[M].dependants=[...x.tracks[M].dependants,i.id];break}j(J,s=x,s),C(),W("saved to Cartier!",!1,2)})},S=async()=>{if(l.detailedLoaded||await h(),!i.tracks)return;if(i.tracks.length==0){W("nothing to download");return}j(d,l.downloading=!0,l),j(d,l.download.stage="converting",l),f.set(0,{duration:1}),f.set(10,{duration:1e4});let C=i.tracks;if(C=C.filter(k=>{let $=!1;for(let b of s.tracks)if(k.id==b.id){$=!0;break}return $&&j(d,l.download.status[k.id]="ready",l),!$}),C.length==0){await f.set(100,{duration:500}),j(d,l.downloading=!1,l),j(d,l.download.done=!0,l);return}let x=C[0];ee.getDownloadTrack(x.url,"",!0).then(async k=>{if(k.success==!1){j(f,r=0,r),j(d,l.downloading=!1,l),W(`serverErr: ${k.info}`);return}const $=k.data.key;j(d,l.download.status[x.id]="downloading",l);for(const[M,_]of[...C].splice(1).entries())j(d,l.download.status[_.id]="downloading",l),(await ee.getDownloadTrack(_.url,$,!1)).success==!1&&W(`failed downloading track (${_.name})`);await f.set(10);const b=async()=>{let M=await ee.getDownloadStatus($);const _=M.data.filter(L=>L.status!=="downloading");if(M.data.forEach(L=>{j(d,l.download.status[L.id]=L.status,l)}),j(f,r=_.length/M.data.length*40+10,r),_.length==M.data.length){j(d,l.download.stage="downloading",l);for(let L=0;L<_.length;L++){let[O,K,V]=await ee.getStreamPlaylist($);if(!O){const z=i.tracks.find(Vt=>Vt.id==V);W(z?`failed downloading "${z==null?void 0:z.name.slice(0,10)}${(z==null?void 0:z.name.length)>10?"...":""}" in "${i.name}"`:`failed downloading a track in "${i.name}"`,!1,5),j(d,l.download.status[V]="failed",l);continue}j(d,l.memblobs=[...l.memblobs,{blob:K,id:V}],l),j(f,r=(L+1)/_.length*50+50,r)}await f.set(100,{duration:500}),j(d,l.downloading=!1,l),j(d,l.download.done=!0,l);return}setTimeout(b,7500)};setTimeout(b,5e3)})},v=async C=>{n(3,c.disabled=!0,c),await g(),n(3,c.disabled=!1,c)};function D(C){me[C?"unshift":"push"](()=>{c=C,n(3,c)})}return t.$$set=C=>{"playlist"in C&&n(0,i=C.playlist),"disabled"in C&&n(1,a=C.disabled),"visible"in C&&n(2,o=C.visible)},[i,a,o,c,l,r,d,f,g,m,y,S,v,D]}class zl extends ae{constructor(e){super(),ie(this,e,Rl,Vl,ne,{playlist:0,disabled:1,visible:2})}}function wt(t,e,n){const l=t.slice();return l[13]=e[n],l}function bt(t,e,n){const l=t.slice();return l[13]=e[n],l}function vt(t,e,n){const l=t.slice();return l[13]=e[n],l}function _t(t){let e,n,l,r,s,i;return{c(){e=w("div"),n=w("input"),l=T(),r=w("button"),r.textContent="x",u(n,"type","text"),u(n,"autocomplete","off"),u(n,"autocapitalize","none"),u(n,"placeholder","search downloaded tracks"),u(n,"class","col-span-9"),u(r,"class","col-span-1 bg-red-500 text-white"),u(e,"class","grid grid-cols-10 w-[95%] gap-1 focus-within:mt-[2vh] duration-500 transition-all")},m(a,o){A(a,e,o),p(e,n),Oe(n,t[1]),p(e,l),p(e,r),s||(i=[H(n,"input",t[10]),H(n,"input",t[6]),H(r,"click",t[11])],s=!0)},p(a,o){o&2&&n.value!==a[1]&&Oe(n,a[1])},d(a){a&&q(e),s=!1,X(i)}}}function yt(t){let e,n,l,r;const s=[Xl,Gl,Yl],i=[];function a(o,c){return!o[3].playlists||o[3].playlists.length==0?0:o[1]==""?1:2}return e=a(t),n=i[e]=s[e](t),{c(){n.c(),l=we()},m(o,c){i[e].m(o,c),A(o,l,c),r=!0},p(o,c){let d=e;e=a(o),e===d?i[e].p(o,c):(oe(),I(i[d],1,1,()=>{i[d]=null}),ce(),n=i[e],n?n.p(o,c):(n=i[e]=s[e](o),n.c()),P(n,1),n.m(l.parentNode,l))},i(o){r||(P(n),r=!0)},o(o){I(n),r=!1},d(o){o&&q(l),i[e].d(o)}}}function Yl(t){let e,n,l=se(t[2]||[]),r=[];for(let i=0;i<l.length;i+=1)r[i]=kt(bt(t,l,i));const s=i=>I(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=we()},m(i,a){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(i,a);A(i,e,a),n=!0},p(i,a){if(a&4){l=se(i[2]||[]);let o;for(o=0;o<l.length;o+=1){const c=bt(i,l,o);r[o]?(r[o].p(c,a),P(r[o],1)):(r[o]=kt(c),r[o].c(),P(r[o],1),r[o].m(e.parentNode,e))}for(oe(),o=l.length;o<r.length;o+=1)s(o);ce()}},i(i){if(!n){for(let a=0;a<l.length;a+=1)P(r[a]);n=!0}},o(i){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)I(r[a]);n=!1},d(i){i&&q(e),Se(r,i)}}}function Gl(t){let e,n,l=se(t[3].playlists),r=[];for(let i=0;i<l.length;i+=1)r[i]=$t(vt(t,l,i));const s=i=>I(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=we()},m(i,a){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(i,a);A(i,e,a),n=!0},p(i,a){if(a&8){l=se(i[3].playlists);let o;for(o=0;o<l.length;o+=1){const c=vt(i,l,o);r[o]?(r[o].p(c,a),P(r[o],1)):(r[o]=$t(c),r[o].c(),P(r[o],1),r[o].m(e.parentNode,e))}for(oe(),o=l.length;o<r.length;o+=1)s(o);ce()}},i(i){if(!n){for(let a=0;a<l.length;a+=1)P(r[a]);n=!0}},o(i){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)I(r[a]);n=!1},d(i){i&&q(e),Se(r,i)}}}function Xl(t){let e;return{c(){e=w("p"),e.textContent="Nothing downloaded! 😕",u(e,"class","pt-10")},m(n,l){A(n,e,l)},p:E,i:E,o:E,d(n){n&&q(e)}}}function kt(t){let e,n;return e=new Bt({props:{playlist:t[13]}}),{c(){re(e.$$.fragment)},m(l,r){te(e,l,r),n=!0},p(l,r){const s={};r&4&&(s.playlist=l[13]),e.$set(s)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){le(e,l)}}}function $t(t){let e,n;return e=new Bt({props:{playlist:t[13]}}),{c(){re(e.$$.fragment)},m(l,r){te(e,l,r),n=!0},p(l,r){const s={};r&8&&(s.playlist=l[13]),e.$set(s)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){le(e,l)}}}function xt(t){let e,n;return e=new zl({props:{playlist:t[13],disabled:t[5].offline,visible:t[4].tab==N.PLAYLISTS}}),{c(){re(e.$$.fragment)},m(l,r){te(e,l,r),n=!0},p(l,r){const s={};r&32&&(s.playlist=l[13]),r&32&&(s.disabled=l[5].offline),r&16&&(s.visible=l[4].tab==N.PLAYLISTS),e.$set(s)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){le(e,l)}}}function Jl(t){let e,n,l,r,s,i,a,o,c,d,f,g,h,m,y,S,v,D,C,x=t[4].tab==N.DOWNLOADED&&_t(t),k=t[4].tab==N.DOWNLOADED&&yt(t),$=se(t[5].playlists.undownloaded||[]),b=[];for(let _=0;_<$.length;_+=1)b[_]=xt(wt(t,$,_));const M=_=>I(b[_],1,1,()=>{b[_]=null});return{c(){e=w("div"),n=w("div"),l=w("div"),r=T(),s=w("button"),i=F("playlists"),o=w("button"),c=F("downloaded"),f=T(),g=w("div"),x&&x.c(),h=T(),k&&k.c(),m=T();for(let _=0;_<b.length;_+=1)b[_].c();u(l,"class","bg-border h-full absolute rounded-xl z-10 duration-1000 transition-transform"),pe(l,"left",(t[5].view.tab==N.PLAYLISTS?0:50)+"%"),pe(l,"width","50%"),u(s,"id","playlistbtn"),u(s,"class",a="grid-cols-1 "+(t[4].tab==N.DOWNLOADED?"text-gray-400":"text-white")+" svelte-13sqm08"),u(o,"id","downloadedbtn"),u(o,"class",d="grid-cols-1 "+(t[4].tab==N.PLAYLISTS?"text-gray-400":"text-white")+" svelte-13sqm08"),u(n,"class","stickytoggle z-10 sticky top-2 w-[50vw] grid grid-cols-2 rounded-xl bg-foreground ring-1 ring-border mx-auto svelte-13sqm08"),u(g,"class","flex flex-col justify-center items-center w-full space-y-2 pb-[25vh] relative"),u(e,"class","h-[100vh] overflow-y-scroll w-[100vw]"),u(e,"style",S=t[4].tab in[N.PLAYLISTS,N.DOWNLOADED]?"":"display: none;")},m(_,L){A(_,e,L),p(e,n),p(n,l),t[7](l),p(n,r),p(n,s),p(s,i),p(n,o),p(o,c),p(e,f),p(e,g),x&&x.m(g,null),p(g,h),k&&k.m(g,null),p(g,m);for(let O=0;O<b.length;O+=1)b[O]&&b[O].m(g,null);v=!0,D||(C=[H(s,"click",t[8]),H(o,"click",t[9])],D=!0)},p(_,[L]){if((!v||L&32)&&pe(l,"left",(_[5].view.tab==N.PLAYLISTS?0:50)+"%"),(!v||L&16&&a!==(a="grid-cols-1 "+(_[4].tab==N.DOWNLOADED?"text-gray-400":"text-white")+" svelte-13sqm08"))&&u(s,"class",a),(!v||L&16&&d!==(d="grid-cols-1 "+(_[4].tab==N.PLAYLISTS?"text-gray-400":"text-white")+" svelte-13sqm08"))&&u(o,"class",d),_[4].tab==N.DOWNLOADED?x?x.p(_,L):(x=_t(_),x.c(),x.m(g,h)):x&&(x.d(1),x=null),_[4].tab==N.DOWNLOADED?k?(k.p(_,L),L&16&&P(k,1)):(k=yt(_),k.c(),P(k,1),k.m(g,m)):k&&(oe(),I(k,1,1,()=>{k=null}),ce()),L&48){$=se(_[5].playlists.undownloaded||[]);let O;for(O=0;O<$.length;O+=1){const K=wt(_,$,O);b[O]?(b[O].p(K,L),P(b[O],1)):(b[O]=xt(K),b[O].c(),P(b[O],1),b[O].m(g,null))}for(oe(),O=$.length;O<b.length;O+=1)M(O);ce()}(!v||L&16&&S!==(S=_[4].tab in[N.PLAYLISTS,N.DOWNLOADED]?"":"display: none;"))&&u(e,"style",S)},i(_){if(!v){P(k);for(let L=0;L<$.length;L+=1)P(b[L]);_&&he(()=>{v&&(y||(y=xe(g,lt,{duration:500},!0)),y.run(1))}),v=!0}},o(_){I(k),b=b.filter(Boolean);for(let L=0;L<b.length;L+=1)I(b[L]);_&&(y||(y=xe(g,lt,{duration:500},!1)),y.run(0)),v=!1},d(_){_&&q(e),t[7](null),x&&x.d(),k&&k.d(),Se(b,_),_&&y&&y.end(),D=!1,X(C)}}}function Ql(t,e,n){let l,r,s;G(t,J,y=>n(3,l=y)),G(t,Ye,y=>n(4,r=y)),G(t,U,y=>n(5,s=y));let i,a="",o;const c=()=>{n(1,a=a.toLowerCase());let S=l.tracks.filter(v=>v.name.toLowerCase().includes(a)).map(v=>v.id);n(2,o=l.playlists.filter(v=>v.name.toLowerCase().includes(a)?!0:v.tracks.some(D=>S.includes(D))))};Re(()=>{});function d(y){me[y?"unshift":"push"](()=>{i=y,n(0,i)})}const f=()=>j(U,s.view.tab=N.PLAYLISTS,s),g=()=>j(U,s.view.tab=N.DOWNLOADED,s);function h(){a=this.value,n(1,a)}return[i,a,o,l,r,s,c,d,f,g,h,()=>n(1,a="")]}class Kl extends ae{constructor(e){super(),ie(this,e,Ql,Jl,ne,{})}}function en(t){let e,n,l;return{c(){e=w("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path fill-rule="evenodd" d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z" clip-rule="evenodd"></path></svg>',u(e,"class","col-span-1 svg-icon svelte-14e2eb1")},m(r,s){A(r,e,s),n||(l=H(e,"click",B.resume),n=!0)},d(r){r&&q(e),n=!1,l()}}}function tn(t){let e,n,l;return{c(){e=w("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path fill-rule="evenodd" d="M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z" clip-rule="evenodd"></path></svg>',u(e,"class","col-span-1 svg-icon svelte-14e2eb1")},m(r,s){A(r,e,s),n||(l=H(e,"click",B.pause),n=!0)},d(r){r&&q(e),n=!1,l()}}}function ln(t){let e,n,l,r,s,i,a=t[1].playback.name+"",o,c,d,f,g,h,m=(t[1].playback.source||"unknown source")+"",y,S,v,D,C,x,k,$,b,M,_;function L(V,z){return V[1].playback.playing?tn:en}let O=L(t),K=O(t);return{c(){e=w("div"),n=w("div"),l=w("button"),l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path fill-rule="evenodd" d="M10.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L12.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06l-7.5 7.5Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M4.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L6.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06l-7.5 7.5Z" clip-rule="evenodd"></path></svg>',r=T(),s=w("div"),i=w("p"),o=F(a),c=T(),d=w("p"),f=F(t[3]),g=F(" - "),h=w("i"),y=F(m),S=T(),K.c(),v=T(),D=w("button"),D.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[2em]"><path fill-rule="evenodd" d="M13.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L11.69 12 4.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M19.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06L17.69 12l-6.97-6.97a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg>',C=T(),x=w("div"),k=w("div"),u(l,"class","col-span-1 svg-icon svelte-14e2eb1"),u(i,"class","truncate font-black"),u(d,"class","text-xs truncate"),u(s,"class","col-span-7 flex flex-col"),u(D,"class","col-span-1 svg-icon svelte-14e2eb1"),u(n,"class","bg-foreground/75 backdrop-blur-3xl rounded-md w-full h-full grid grid-cols-10 items-center justify-center gap-1"),u(k,"class",$="h-[100%] bg-primary "+(t[0].is?"animate-pulse":"")),pe(k,"width",t[4]+"%"),u(x,"class","top-0 h-[5px] w-[100%] absolute bg-white/5 overflow-clip rounded-t-md"),u(e,"style",b=t[1].loaded?"":"visibility: hidden"),u(e,"class","ring-1 ring-border rounded-md shadow-md shadow-black/50 w-[95%] h-[10vh] absolute bottom-[12vh]")},m(V,z){A(V,e,z),p(e,n),p(n,l),p(n,r),p(n,s),p(s,i),p(i,o),p(s,c),p(s,d),p(d,f),p(d,g),p(d,h),p(h,y),p(n,S),K.m(n,null),p(n,v),p(n,D),p(e,C),p(e,x),p(x,k),t[12](e),M||(_=[H(l,"click",t[7]),H(D,"click",t[8]),H(x,"touchstart",t[9]),H(x,"touchmove",t[10]),H(x,"touchend",t[11],{passive:!0})],M=!0)},p(V,[z]){z&2&&a!==(a=V[1].playback.name+"")&&Q(o,a),z&8&&Q(f,V[3]),z&2&&m!==(m=(V[1].playback.source||"unknown source")+"")&&Q(y,m),O!==(O=L(V))&&(K.d(1),K=O(V),K&&(K.c(),K.m(n,v))),z&1&&$!==($="h-[100%] bg-primary "+(V[0].is?"animate-pulse":""))&&u(k,"class",$),z&16&&pe(k,"width",V[4]+"%"),z&2&&b!==(b=V[1].loaded?"":"visibility: hidden")&&u(e,"style",b)},i:E,o:E,d(V){V&&q(e),K.d(),t[12](null),M=!1,X(_)}}}function nn(t,e,n){let l,r;G(t,R,S=>n(1,l=S));let s,i=Ut(0,{duration:100});G(t,i,S=>n(4,r=S));let a="";const o=S=>{j(R,l.playback.handle.currentTime=S/100*l.playback.dur,l)};let c={is:!1,startX:0,startProgress:0};const d=()=>{B.previous()==!1?W("queue is empty"):B.play()},f=()=>{B.next()==!1?W("queue is empty"):B.play()},g=S=>{n(0,c.is=!0,c),n(0,c.startX=S.touches[0].clientX,c),n(0,c.startProgress=r,c)},h=S=>{if(!c.is)return;const D=S.touches[0].clientX-c.startX;let C=c.startProgress+D/s.clientWidth*100;j(i,r=Math.min(100,Math.max(0,C)),r)},m=()=>{o(r),n(0,c.is=!1,c)};function y(S){me[S?"unshift":"push"](()=>{s=S,n(2,s)})}return t.$$.update=()=>{if(t.$$.dirty&3){l.playback.time;let S=l.playback.time,v=S/60|0,D=S%60|0;n(3,a=`${v==0?"":`${v}:`}${v==0?`${D}s`:D<10?`0${D}`:D}`),c.is||i.set(S/l.playback.dur*100)}},[c,l,s,a,r,i,o,d,f,g,h,m,y]}class rn extends ae{constructor(e){super(),ie(this,e,nn,ln,ne,{})}}function St(t){let e,n,l,r,s,i,a,o,c,d,f,g,h,m,y,S,v,D,C;function x(b,M){return b[0].user.images&&b[0].user.images.length>0?an:sn}let k=x(t),$=k(t);return{c(){e=w("div"),n=w("button"),l=Y("svg"),r=Y("path"),s=Y("path"),i=F(`
      home`),o=T(),c=w("button"),$.c(),d=F(`
      account`),g=T(),h=w("button"),m=Y("svg"),y=Y("path"),S=F(`
      settings`),u(r,"d","M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"),u(s,"d","m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"),u(l,"xmlns","http://www.w3.org/2000/svg"),u(l,"viewBox","0 0 24 24"),u(l,"fill","currentColor"),u(l,"class","w-[2.5em]"),u(n,"class",a="flex flex-col items-center justify-center bg-transparent text-xs "+([N.PLAYLISTS,N.DOWNLOADED].includes(t[1].tab)?"text-primary":"text-white")+" svelte-gbqgsd"),u(c,"class",f="grayscale flex flex-col items-center justify-center bg-transparent text-xs disabled:bg-transparent "+(t[0].view.tab==N.ACCOUNT?"text-primary":"text-white")+" svelte-gbqgsd"),c.disabled=!0,u(y,"fill-rule","evenodd"),u(y,"d","M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z"),u(y,"clip-rule","evenodd"),u(m,"xmlns","http://www.w3.org/2000/svg"),u(m,"viewBox","0 0 24 24"),u(m,"fill","currentColor"),u(m,"class","w-[2.5em]"),u(h,"class",v="flex flex-col items-center justify-center bg-transparent text-xs "+(t[0].view.tab==N.SETTINGS?"text-primary":"text-white")+" svelte-gbqgsd"),u(e,"class","absolute bottom-0 container flex flex-row justify-around items-center h-[12vh] pb-[3vh] backdrop-blur-xl bg-background/80 rounded-t-lg svelte-gbqgsd")},m(b,M){A(b,e,M),p(e,n),p(n,l),p(l,r),p(l,s),p(n,i),p(e,o),p(e,c),$.m(c,null),p(c,d),p(e,g),p(e,h),p(h,m),p(m,y),p(h,S),D||(C=[H(n,"click",t[2]),H(c,"click",t[3]),H(h,"click",t[4])],D=!0)},p(b,M){M&2&&a!==(a="flex flex-col items-center justify-center bg-transparent text-xs "+([N.PLAYLISTS,N.DOWNLOADED].includes(b[1].tab)?"text-primary":"text-white")+" svelte-gbqgsd")&&u(n,"class",a),k===(k=x(b))&&$?$.p(b,M):($.d(1),$=k(b),$&&($.c(),$.m(c,d))),M&1&&f!==(f="grayscale flex flex-col items-center justify-center bg-transparent text-xs disabled:bg-transparent "+(b[0].view.tab==N.ACCOUNT?"text-primary":"text-white")+" svelte-gbqgsd")&&u(c,"class",f),M&1&&v!==(v="flex flex-col items-center justify-center bg-transparent text-xs "+(b[0].view.tab==N.SETTINGS?"text-primary":"text-white")+" svelte-gbqgsd")&&u(h,"class",v)},d(b){b&&q(e),$.d(),D=!1,X(C)}}}function sn(t){let e;return{c(){e=F("open")},m(n,l){A(n,e,l)},p:E,d(n){n&&q(e)}}}function an(t){let e,n,l;return{c(){e=w("img"),u(e,"loading","lazy"),$e(e.src,n=t[0].user.images[0].url)||u(e,"src",n),u(e,"alt",l=`${t[0].user.display_name}'s profile picture`),u(e,"class","rounded-full w-[3em] ring-border ring-1 aspect-square")},m(r,s){A(r,e,s)},p(r,s){s&1&&!$e(e.src,n=r[0].user.images[0].url)&&u(e,"src",n),s&1&&l!==(l=`${r[0].user.display_name}'s profile picture`)&&u(e,"alt",l)},d(r){r&&q(e)}}}function on(t){let e,n=t[0].logged&&St(t);return{c(){n&&n.c(),e=we()},m(l,r){n&&n.m(l,r),A(l,e,r)},p(l,[r]){l[0].logged?n?n.p(l,r):(n=St(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:E,o:E,d(l){l&&q(e),n&&n.d(l)}}}function cn(t,e,n){let l,r;return G(t,U,o=>n(0,l=o)),G(t,Ye,o=>n(1,r=o)),[l,r,()=>{j(U,l.view.tab=N.PLAYLISTS,l)},()=>{j(U,l.view.tab=N.ACCOUNT,l)},()=>{j(U,l.view.tab=N.SETTINGS,l)}]}class un extends ae{constructor(e){super(),ie(this,e,cn,on,ne,{})}}function Lt(t){let e,n;return e=new Dl({}),{c(){re(e.$$.fragment)},m(l,r){te(e,l,r),n=!0},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){le(e,l)}}}function dn(t){let e,n,l,r,s,i,a,o;n=new Kl({});let c=t[0].tab==N.SETTINGS&&Lt();return s=new un({}),a=new rn({}),{c(){e=w("div"),re(n.$$.fragment),l=T(),c&&c.c(),r=T(),re(s.$$.fragment),i=T(),re(a.$$.fragment),u(e,"class","flex flex-col items-center justify-center relative")},m(d,f){A(d,e,f),te(n,e,null),p(e,l),c&&c.m(e,null),p(e,r),te(s,e,null),p(e,i),te(a,e,null),o=!0},p(d,[f]){d[0].tab==N.SETTINGS?c?f&1&&P(c,1):(c=Lt(),c.c(),P(c,1),c.m(e,r)):c&&(oe(),I(c,1,1,()=>{c=null}),ce())},i(d){o||(P(n.$$.fragment,d),P(c),P(s.$$.fragment,d),P(a.$$.fragment,d),o=!0)},o(d){I(n.$$.fragment,d),I(c),I(s.$$.fragment,d),I(a.$$.fragment,d),o=!1},d(d){d&&q(e),le(n),c&&c.d(),le(s),le(a)}}}function fn(t,e,n){let l;return G(t,Ye,r=>n(0,l=r)),[l]}class pn extends ae{constructor(e){super(),ie(this,e,fn,dn,ne,{})}}function gn(t){let e,n;const l=t[1].default,r=qt(l,t,t[0],null);return{c(){e=w("div"),r&&r.c(),u(e,"class","max-h-[90%] max-w-[90%]")},m(s,i){A(s,e,i),r&&r.m(e,null),n=!0},p(s,[i]){r&&r.p&&(!n||i&1)&&Dt(r,l,s,s[0],n?Tt(l,s[0],i,null):Ot(s[0]),null)},i(s){n||(P(r,s),n=!0)},o(s){I(r,s),n=!1},d(s){s&&q(e),r&&r.d(s)}}}function mn(t,e,n){let{$$slots:l={},$$scope:r}=e;return t.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,l]}class hn extends ae{constructor(e){super(),ie(this,e,mn,gn,ne,{})}}function wn(t){let e,n;return e=new kl({props:{handleWakeup:t[2]}}),{c(){re(e.$$.fragment)},m(l,r){te(e,l,r),n=!0},p:E,i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){le(e,l)}}}function bn(t){let e,n;return e=new pn({}),{c(){re(e.$$.fragment)},m(l,r){te(e,l,r),n=!0},p:E,i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){le(e,l)}}}function vn(t){let e,n;return e=new hn({props:{$$slots:{default:[_n]},$$scope:{ctx:t}}}),{c(){re(e.$$.fragment)},m(l,r){te(e,l,r),n=!0},p(l,r){const s={};r&32&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){le(e,l)}}}function _n(t){let e,n;return e=new Sl({props:{handleUserid:t[1]}}),{c(){re(e.$$.fragment)},m(l,r){te(e,l,r),n=!0},p:E,i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){le(e,l)}}}function yn(t){let e,n,l,r,s,i,a,o,c;const d=[vn,bn,wn],f=[];function g(h,m){return!h[0].logged&&!h[0].offline?0:h[0].logged?1:2}return s=g(t),i=f[s]=d[s](t),{c(){e=w("div"),n=T(),l=w("main"),r=w("div"),i.c(),a=T(),o=w("div"),u(e,"class","bg-foreground/90 p-1 rounded-md w-[80vw] max-w-[90vw] z-[1000]"),pe(e,"display","none"),u(o,"class","absolute left-0 top-[1em] w-full flex flex-col items-center justify-center space-y-1 text-xs"),u(r,"class","flex flex-col justify-center items-center relative h-[100%] bg-background"),u(l,"class","w-screen h-screen text-white text-xl select-none text-center")},m(h,m){A(h,e,m),t[3](e),A(h,n,m),A(h,l,m),p(l,r),f[s].m(r,null),p(r,a),p(r,o),t[4](o),c=!0},p(h,[m]){let y=s;s=g(h),s===y?f[s].p(h,m):(oe(),I(f[y],1,1,()=>{f[y]=null}),ce(),i=f[s],i?i.p(h,m):(i=f[s]=d[s](h),i.c()),P(i,1),i.m(r,a))},i(h){c||(P(i),c=!0)},o(h){I(i),c=!1},d(h){h&&(q(e),q(n),q(l)),t[3](null),f[s].d(),t[4](null)}}}let De,Wt;const W=(t,e=!1,n=3,l)=>{const r=Wt.cloneNode(!0);r.innerHTML=e?`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.2em] animate-spin inline aspect-square mr-1" > <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" /> </svg>${t}`:t,r.style.display="block",De.appendChild(r),l?l(()=>De.removeChild(r)):setTimeout(()=>De.removeChild(r),n*1e3)};function kn(t,e,n){let l;G(t,U,o=>n(0,l=o));const r=async o=>{await fe.login(o)},s=o=>{o?j(U,l.offline=!1,l):W("Cartier Manager is running offline",!1,4),fe.init(()=>{l.offline==!0&&j(U,l.view.tab=N.DOWNLOADED,l)})};function i(o){me[o?"unshift":"push"](()=>{Wt=o})}function a(o){me[o?"unshift":"push"](()=>{De=o})}return[l,r,s,i,a]}class $n extends ae{constructor(e){super(),ie(this,e,kn,yn,ne,{})}}new $n({target:document.getElementById("app")});
